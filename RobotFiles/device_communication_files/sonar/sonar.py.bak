import time
import serial

# configure the serial connections (the parameters differs on the device you are connecting to)
sonar = serial.Serial(
    port = '/dev/ttyUSB0',
    baudrate = 115200,
    stopbits = 1,
    bytesize = serial.EIGHTBITS,
    timeout = 4
)

print sonar.isOpen()

while True:
    print "reading value"

    sonar.write("\xEE\x51\x04\xE4\xE6\xE2\xE0\x00\x00\x00\xB1")
    res = sonar.read(12)
    if len(res) == 12:
        print 'sonar 4', ord(res[3])*256 + ord(res[4]), 'sonar 6', ord(res[5])*256 + ord(res[6]), 'sonar 2', ord(res[7])*256 + ord(res[8]), 'sonar 0', ord(res[9])*256 + ord(res[10])
    else:
        print len(res)
    
    time.sleep(1)